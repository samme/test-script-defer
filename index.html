<!DOCTYPE html>
<meta charset='utf-8'>
<meta name='viewport' content='initial-scale=1.0, user-scalable=no'>
<title>Test &lt;script defer&gt;</title>
<style>
body { max-width: 400px; margin: 0 auto; padding: 0; color: #111; background: #eee; font: caption; line-height: 1.5; }
iframe { display: block; margin: 1rem auto; }
button { display: block; width: 100%; padding: 1rem 0; margin: 1rem auto; font: caption; }
</style>

<h1>no defer</h1>

<iframe width=400 height=300 frameborder=0 id=no-defer src="no-defer.html"></iframe>

<h1>defer</h1>

<iframe width=400 height=300 frameborder=0 id=defer src="defer.html"></iframe>

<button id=reload>Reload</button>

<script>
var $defer = document.getElementById('defer');
var $noDefer = document.getElementById('no-defer');

document.getElementById('reload').addEventListener('click', function () {
  $noDefer.src = 'no-defer.html?' + new Date();
  $defer.src   = 'defer.html?'    + new Date();
});
</script>
